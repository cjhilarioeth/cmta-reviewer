"use strict";(self.webpackChunkcmta_reviewer=self.webpackChunkcmta_reviewer||[]).push([[468,493,636,874],{2874:(e,t,i)=>{i.r(t),i.d(t,{auth:()=>a,db:()=>l,default:()=>c,storage:()=>p});var d=i(223),r=i(3962),o=i(8185),n=i(9993);const s=(0,d.Wp)({apiKey:"AIzaSyDNBLz4IADIfAR1CQZzGQrJCgywQfP5RwU",authDomain:"cmta-reviewer.firebaseapp.com",projectId:"cmta-reviewer",storageBucket:"cmta-reviewer.firebasestorage.app",messagingSenderId:"11861010695",appId:"1:11861010695:web:2e81f2dfea02032f24bda2",measurementId:"G-4R1MXKFJ8P"}),a=(0,r.getAuth)(s),l=(0,o.getFirestore)(s),p=(0,n.c7)(s),c=s},3099:(e,t,i)=>{i.r(t),i.d(t,{default:()=>p});var d=i(6540),r=i(8481),o=i(3962),n=i(8185),s=i(2874),a=i(4848);const l="ceejay.hilario@gmail.com";function p(){const[e,t]=(0,d.useState)(null),[i,p]=(0,d.useState)([]),[c,x]=(0,d.useState)(!0),[h,g]=(0,d.useState)(!1),[f,u]=(0,d.useState)(null);(0,d.useEffect)(()=>{const e=(0,o.onAuthStateChanged)(s.auth,async e=>{t(e),e&&e.email===l?(g(!0),await b()):g(!1),x(!1)});return()=>e()},[]);const m=async()=>{const e=new o.GoogleAuthProvider;await(0,o.signInWithPopup)(s.auth,e)},b=async()=>{const e=(0,n.P)((0,n.collection)(s.db,"payments"),(0,n.My)("createdAt","desc")),t=(await(0,n.GG)(e)).docs.map(e=>({id:e.id,...e.data()}));p(t)},y=async(e,t)=>{try{const i=(0,n.H9)(s.db,"payments",e);await(0,n.mZ)(i,{status:t,updatedAt:new Date}),await b(),alert(`Payment status updated to: ${t}`)}catch(i){console.error("Error updating payment status:",i),alert("Failed to update payment status")}};return c?(0,a.jsx)(r.A,{title:"Admin Dashboard",children:(0,a.jsx)("div",{style:{textAlign:"center",padding:"2rem"},children:(0,a.jsxs)("div",{style:{display:"inline-block",padding:"20px",borderRadius:"8px",backgroundColor:"#f8f9fa"},children:[(0,a.jsx)("div",{style:{width:"20px",height:"20px",border:"2px solid #e3e3e3",borderTop:"2px solid #4285f4",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 10px"}}),(0,a.jsx)("p",{style:{margin:0,color:"#666"},children:"Loading admin dashboard..."})]})})}):e?h?(0,a.jsx)(r.A,{title:"Admin Dashboard",children:(0,a.jsxs)("div",{style:{padding:"2rem"},children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem",paddingBottom:"1rem",borderBottom:"2px solid #e0e0e0"},children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{style:{margin:0,color:"#1a73e8"},children:"\ud83d\udcca Payments Dashboard"}),(0,a.jsxs)("p",{style:{margin:"8px 0 0 0",color:"#666"},children:["Logged in as: ",e.email]})]}),(0,a.jsx)("button",{onClick:b,style:{padding:"8px 16px",backgroundColor:"#1a73e8",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},children:"\ud83d\udd04 Refresh"})]}),0===i.length?(0,a.jsx)("div",{style:{textAlign:"center",padding:"3rem",backgroundColor:"#f8f9fa",borderRadius:"8px",border:"2px dashed #dee2e6"},children:(0,a.jsx)("p",{style:{fontSize:"18px",color:"#666"},children:"No payments found."})}):(0,a.jsx)("div",{style:{overflowX:"auto"},children:(0,a.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",backgroundColor:"#fff",borderRadius:"8px",overflow:"hidden",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{style:{backgroundColor:"#f8f9fa"},children:[(0,a.jsx)("th",{style:{padding:"16px",textAlign:"left",borderBottom:"2px solid #dee2e6"},children:"Email"}),(0,a.jsx)("th",{style:{padding:"16px",textAlign:"left",borderBottom:"2px solid #dee2e6"},children:"Tier"}),(0,a.jsx)("th",{style:{padding:"16px",textAlign:"left",borderBottom:"2px solid #dee2e6"},children:"Status"}),(0,a.jsx)("th",{style:{padding:"16px",textAlign:"left",borderBottom:"2px solid #dee2e6"},children:"Receipt"}),(0,a.jsx)("th",{style:{padding:"16px",textAlign:"left",borderBottom:"2px solid #dee2e6"},children:"Date"}),(0,a.jsx)("th",{style:{padding:"16px",textAlign:"left",borderBottom:"2px solid #dee2e6"},children:"Actions"})]})}),(0,a.jsx)("tbody",{children:i.map((e,t)=>(0,a.jsxs)("tr",{style:{backgroundColor:t%2==0?"#fff":"#f8f9fa",borderBottom:"1px solid #dee2e6"},children:[(0,a.jsx)("td",{style:{padding:"16px"},children:e.email}),(0,a.jsx)("td",{style:{padding:"16px"},children:(0,a.jsx)("span",{style:{padding:"4px 8px",borderRadius:"12px",backgroundColor:"premium"===e.tier?"#e3f2fd":"#f3e5f5",color:"premium"===e.tier?"#1565c0":"#7b1fa2",fontSize:"12px",fontWeight:"500"},children:e.tier})}),(0,a.jsx)("td",{style:{padding:"16px"},children:(0,a.jsx)("span",{style:{padding:"4px 8px",borderRadius:"12px",backgroundColor:"approved"===e.status?"#e8f5e8":"rejected"===e.status?"#ffebee":"#fff3e0",color:"approved"===e.status?"#2e7d32":"rejected"===e.status?"#c62828":"#ef6c00",fontSize:"12px",fontWeight:"500"},children:e.status||"pending"})}),(0,a.jsx)("td",{style:{padding:"16px"},children:e.receiptBase64?(0,a.jsx)("button",{onClick:()=>{u(e)},style:{padding:"6px 12px",backgroundColor:"#1a73e8",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"\ud83d\udcc4 View Receipt"}):(0,a.jsx)("span",{style:{color:"#999",fontSize:"12px"},children:"No receipt"})}),(0,a.jsx)("td",{style:{padding:"16px",fontSize:"14px"},children:e.createdAt?.toDate().toLocaleString()||"Pending"}),(0,a.jsx)("td",{style:{padding:"16px"},children:(0,a.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,a.jsx)("button",{onClick:()=>y(e.id,"approved"),style:{padding:"4px 8px",backgroundColor:"#4caf50",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"11px"},children:"\u2705 Approve"}),(0,a.jsx)("button",{onClick:()=>y(e.id,"rejected"),style:{padding:"4px 8px",backgroundColor:"#f44336",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"11px"},children:"\u274c Reject"})]})})]},e.id))})]})}),f&&(0,a.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},children:(0,a.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"8px",padding:"20px",maxWidth:"90vw",maxHeight:"90vh",overflow:"auto",position:"relative"},children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",paddingBottom:"10px",borderBottom:"1px solid #eee"},children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{style:{margin:0},children:"Payment Receipt"}),(0,a.jsxs)("p",{style:{margin:"5px 0 0 0",color:"#666",fontSize:"14px"},children:["From: ",f.email," | Tier: ",f.tier]})]}),(0,a.jsx)("button",{onClick:()=>{u(null)},style:{backgroundColor:"#f44336",color:"white",border:"none",borderRadius:"4px",padding:"8px 12px",cursor:"pointer",fontSize:"14px"},children:"\u2715 Close"})]}),f.receiptBase64&&(0,a.jsxs)("div",{style:{textAlign:"center"},children:[(0,a.jsx)("img",{src:f.receiptBase64,alt:"Payment Receipt",style:{maxWidth:"100%",maxHeight:"70vh",border:"1px solid #ddd",borderRadius:"4px"}}),(0,a.jsxs)("div",{style:{marginTop:"15px",fontSize:"12px",color:"#666"},children:[(0,a.jsxs)("p",{children:["File: ",f.fileName||"receipt.png"]}),(0,a.jsxs)("p",{children:["Size: ",f.fileSize?(f.fileSize/1024).toFixed(1)+" KB":"Unknown"]})]})]})]})}),(0,a.jsx)("style",{jsx:!0,children:"\n          @keyframes spin {\n            0% { transform: rotate(0deg); }\n            100% { transform: rotate(360deg); }\n          }\n        "})]})}):(0,a.jsx)(r.A,{title:"Admin Dashboard",children:(0,a.jsxs)("div",{style:{textAlign:"center",padding:"2rem"},children:[(0,a.jsx)("h1",{children:"\ud83d\udeab Access Denied"}),(0,a.jsxs)("p",{children:["Sorry, ",e.email,", you do not have admin access."]})]})}):(0,a.jsx)(r.A,{title:"Admin Dashboard",children:(0,a.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"60vh",padding:"2rem"},children:(0,a.jsxs)("div",{style:{maxWidth:"400px",width:"100%",padding:"40px",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",backgroundColor:"#fff",textAlign:"center"},children:[(0,a.jsx)("h1",{style:{fontSize:"28px",marginBottom:"16px"},children:"\ud83d\udd12 Admin Dashboard"}),(0,a.jsx)("p",{style:{marginBottom:"32px",color:"#666"},children:"Please log in with Google to continue"}),(0,a.jsx)("button",{onClick:m,style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",padding:"12px 16px",border:"1px solid #dadce0",borderRadius:"4px",backgroundColor:"#fff",color:"#3c4043",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},children:"Login with Google"})]})})})}}}]);