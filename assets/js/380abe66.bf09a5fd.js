"use strict";(self.webpackChunkcmta_reviewer=self.webpackChunkcmta_reviewer||[]).push([[5216],{7981:(e,t,i)=>{i.r(t),i.d(t,{default:()=>d});var n=i(6540),o=i(839),r=i(6347),s=i(4848);function d(){const[e,t]=(0,n.useState)(null),[d,l]=(0,n.useState)(null),[a,c]=(0,n.useState)(!1),[u,h]=(0,n.useState)(!1),g=(0,r.zy)(),f=(0,r.W6)(),p=()=>{const e=new URLSearchParams(g.search).get("redirect");if(e)try{return decodeURIComponent(e)}catch{return e}if("undefined"!=typeof window){const e=sessionStorage.getItem("loginRedirect");if(e)return sessionStorage.removeItem("loginRedirect"),e}return"/cmta-reviewer/"};(0,n.useEffect)(()=>{"undefined"!=typeof window&&(async()=>{const{getAuth:e,GoogleAuthProvider:n,signInWithPopup:o,onAuthStateChanged:r}=await Promise.resolve().then(i.bind(i,3962)),s=e((await Promise.resolve().then(i.bind(i,6614))).default);r(s,e=>{if(l(e),e){const e=p();h(!0),setTimeout(()=>{f.push(e)},1200)}}),t({auth:s,GoogleAuthProvider:n,signInWithPopup:o})})()},[f,g.search]);return(0,s.jsx)(o.A,{title:"Login",description:"Access your account",children:(0,s.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"60vh",padding:"2rem"},children:(0,s.jsxs)("div",{style:{maxWidth:"420px",width:"100%",padding:"40px",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",backgroundColor:"#fff",textAlign:"center"},children:[(0,s.jsx)("h1",{style:{fontSize:28,margin:0},children:d?"Welcome!":"Sign in"}),(0,s.jsx)("p",{style:{color:"#5f6368",marginTop:8,marginBottom:24},children:d?u?"Redirecting you back\u2026":"You're signed in":"Continue to your account"}),d?(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:12,marginBottom:16},children:[d.photoURL&&(0,s.jsx)("img",{src:d.photoURL,alt:"Profile",style:{width:40,height:40,borderRadius:"50%"}}),(0,s.jsxs)("div",{style:{textAlign:"left"},children:[(0,s.jsx)("div",{style:{fontWeight:600},children:d.displayName||"User"}),(0,s.jsx)("div",{style:{color:"#5f6368",fontSize:14},children:d.email})]})]}),(0,s.jsxs)("div",{style:{display:"flex",gap:12},children:[(0,s.jsx)("button",{onClick:()=>{const e=p();f.push(e)},style:{flex:1,padding:"12px 16px",border:"none",borderRadius:6,background:"#1a73e8",color:"#fff",fontWeight:600,cursor:"pointer"},children:"Continue"}),(0,s.jsx)("button",{onClick:async()=>{e&&(await e.auth.signOut(),l(null))},style:{flex:1,padding:"12px 16px",border:"1px solid #dadce0",borderRadius:6,background:"#fff",color:"#d93025",fontWeight:600,cursor:"pointer"},children:"Sign out"})]})]}):(0,s.jsx)("button",{onClick:async()=>{if(e){c(!0);try{const t=new e.GoogleAuthProvider;await e.signInWithPopup(e.auth,t)}catch(t){console.error("Login failed:",t),c(!1),alert("Login failed. Please try again.")}}},disabled:a||!e,style:{width:"100%",padding:"12px 16px",border:"1px solid #dadce0",borderRadius:6,background:"#fff",cursor:a?"not-allowed":"pointer"},children:a?"Signing in\u2026":"Continue with Google"})]})})})}}}]);