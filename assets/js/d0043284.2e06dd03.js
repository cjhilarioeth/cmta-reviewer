"use strict";(self.webpackChunkcmta_reviewer=self.webpackChunkcmta_reviewer||[]).push([[172],{8050:(e,t,i)=>{i.r(t),i.d(t,{default:()=>s});var n=i(6540),r=i(8481),a=i(6347),l=i(4848);function s(){const[e,t]=(0,n.useState)(null),[s,o]=(0,n.useState)(null),[c,d]=(0,n.useState)(null),[p,u]=(0,n.useState)(!1),[h,m]=(0,n.useState)(!1),[g,y]=(0,n.useState)("premium"),f=(0,a.zy)();(0,n.useEffect)(()=>{const e=new URLSearchParams(f.search);y(e.get("tier")||"premium")},[f]),(0,n.useEffect)(()=>{"undefined"!=typeof window&&(async()=>{const{getAuth:e,onAuthStateChanged:n,GoogleAuthProvider:r,signInWithPopup:a}=await Promise.all([i.e(879),i.e(962)]).then(i.bind(i,3962)),{getFirestore:l,collection:s,addDoc:c,serverTimestamp:d}=await Promise.all([i.e(879),i.e(185)]).then(i.bind(i,8185)),p=(await Promise.all([i.e(879),i.e(962),i.e(185),i.e(331),i.e(493)]).then(i.bind(i,2874))).default,u=e(p),h=l(p);n(u,e=>t(e)),o({auth:u,db:h,GoogleAuthProvider:r,signInWithPopup:a,collection:s,addDoc:c,serverTimestamp:d})})()},[]);if(!s)return(0,l.jsx)(r.A,{title:"Payment",children:(0,l.jsx)("p",{style:{textAlign:"center",marginTop:"2rem"},children:"Loading..."})});const x={premium:{label:"Premium",price:"\u20b1499 / month"},pro:{label:"Pro",price:"\u20b11,499 / month"}};return(0,l.jsx)(r.A,{title:"Payment",description:"Complete your subscription",children:(0,l.jsxs)("div",{style:{textAlign:"center",padding:"2rem"},children:[(0,l.jsxs)("h1",{children:["Upgrade to ",x[g].label]}),(0,l.jsx)("p",{style:{fontSize:"18px",marginBottom:"1rem"},children:x[g].price}),e?(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{children:"Pay via GCash"}),(0,l.jsx)("img",{src:"img/gcash-qr.png",alt:"GCash QR",style:{width:"200px",margin:"0 auto",borderRadius:"10px"}}),(0,l.jsx)("p",{children:"Scan the QR, then upload your payment screenshot below."}),(0,l.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),c&&e&&s)try{u(!0);const t=await(e=>new Promise((t,i)=>{const n=new FileReader;n.readAsDataURL(e),n.onload=()=>t(n.result),n.onerror=e=>i(e)}))(c);await s.addDoc(s.collection(s.db,"payments"),{email:e.email,uid:e.uid,tier:g,receiptBase64:t,fileName:c.name,fileSize:c.size,fileType:c.type,status:"pending",createdAt:s.serverTimestamp()}),m(!0),d(null),u(!1),alert("\u2705 Receipt uploaded! We will verify your payment.")}catch(i){console.error(i),u(!1),alert("\u274c Upload failed.")}},children:[(0,l.jsx)("input",{type:"file",accept:"image/*",onChange:e=>d(e.target.files[0]),required:!0}),(0,l.jsx)("button",{type:"submit",disabled:p,style:{marginTop:"10px"},children:p?"Uploading...":"Upload Receipt"})]}),h&&(0,l.jsx)("p",{style:{color:"green"},children:"\u2705 Receipt uploaded! Pending admin verification."})]}):(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{children:"\ud83d\udd12 Please log in with Google to continue"}),(0,l.jsx)("button",{onClick:async()=>{if(!s)return;const e=new s.GoogleAuthProvider;await s.signInWithPopup(s.auth,e)},children:"Login with Google"})]})]})})}}}]);