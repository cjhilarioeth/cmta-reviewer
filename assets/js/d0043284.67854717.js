"use strict";(self.webpackChunkcmta_reviewer=self.webpackChunkcmta_reviewer||[]).push([[172],{8050:(e,t,i)=>{i.r(t),i.d(t,{default:()=>o});var n=i(6540),r=i(839),a=i(6347),s=i(4848);function o(){const[e,t]=(0,n.useState)(null),[o,l]=(0,n.useState)(null),[c,d]=(0,n.useState)(null),[p,u]=(0,n.useState)(!1),[h,m]=(0,n.useState)(!1),[g,y]=(0,n.useState)("premium"),f=(0,a.zy)();(0,n.useEffect)(()=>{const e=new URLSearchParams(f.search);y(e.get("tier")||"premium")},[f]),(0,n.useEffect)(()=>{"undefined"!=typeof window&&(async()=>{const{getAuth:e,onAuthStateChanged:n,GoogleAuthProvider:r,signInWithPopup:a}=await Promise.resolve().then(i.bind(i,3962)),{getFirestore:s,collection:o,addDoc:c,serverTimestamp:d}=await Promise.resolve().then(i.bind(i,8185)),p=(await Promise.resolve().then(i.bind(i,6614))).default,u=e(p),h=s(p);n(u,e=>t(e)),l({auth:u,db:h,GoogleAuthProvider:r,signInWithPopup:a,collection:o,addDoc:c,serverTimestamp:d})})()},[]);if(!o)return(0,s.jsx)(r.A,{title:"Payment",children:(0,s.jsx)("p",{style:{textAlign:"center",marginTop:"2rem"},children:"Loading..."})});const x={premium:{label:"Premium",price:"\u20b1499 / month"},pro:{label:"Pro",price:"\u20b11,499 / month"}};return(0,s.jsx)(r.A,{title:"Payment",description:"Complete your subscription",children:(0,s.jsxs)("div",{style:{textAlign:"center",padding:"2rem"},children:[(0,s.jsxs)("h1",{children:["Upgrade to ",x[g].label]}),(0,s.jsx)("p",{style:{fontSize:"18px",marginBottom:"1rem"},children:x[g].price}),e?(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{children:"Pay via GCash"}),(0,s.jsx)("img",{src:"img/gcash-qr.png",alt:"GCash QR",style:{width:"200px",margin:"0 auto",borderRadius:"10px"}}),(0,s.jsx)("p",{children:"Scan the QR, then upload your payment screenshot below."}),(0,s.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),c&&e&&o)try{u(!0);const t=await(e=>new Promise((t,i)=>{const n=new FileReader;n.readAsDataURL(e),n.onload=()=>t(n.result),n.onerror=e=>i(e)}))(c);await o.addDoc(o.collection(o.db,"payments"),{email:e.email,uid:e.uid,tier:g,receiptBase64:t,fileName:c.name,fileSize:c.size,fileType:c.type,status:"pending",createdAt:o.serverTimestamp()}),m(!0),d(null),u(!1),alert("\u2705 Receipt uploaded! We will verify your payment.")}catch(i){console.error(i),u(!1),alert("\u274c Upload failed.")}},children:[(0,s.jsx)("input",{type:"file",accept:"image/*",onChange:e=>d(e.target.files[0]),required:!0}),(0,s.jsx)("button",{type:"submit",disabled:p,style:{marginTop:"10px"},children:p?"Uploading...":"Upload Receipt"})]}),h&&(0,s.jsx)("p",{style:{color:"green"},children:"\u2705 Receipt uploaded! Pending admin verification."})]}):(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{children:"\ud83d\udd12 Please log in with Google to continue"}),(0,s.jsx)("button",{onClick:async()=>{if(!o)return;const e=new o.GoogleAuthProvider;await o.signInWithPopup(o.auth,e)},children:"Login with Google"})]})]})})}}}]);