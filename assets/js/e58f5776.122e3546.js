"use strict";(self.webpackChunkcmta_reviewer=self.webpackChunkcmta_reviewer||[]).push([[468,493,636,874],{2874:(e,t,i)=>{i.r(t),i.d(t,{auth:()=>c,db:()=>l,default:()=>o,storage:()=>h});var r=i(223),n=i(3962),a=i(8185),d=i(9993);const s=(0,r.Wp)({apiKey:"AIzaSyDNBLz4IADIfAR1CQZzGQrJCgywQfP5RwU",authDomain:"cmta-reviewer.firebaseapp.com",projectId:"cmta-reviewer",storageBucket:"cmta-reviewer.firebasestorage.app",messagingSenderId:"11861010695",appId:"1:11861010695:web:2e81f2dfea02032f24bda2",measurementId:"G-4R1MXKFJ8P"}),c=(0,n.getAuth)(s),l=(0,a.getFirestore)(s),h=(0,d.c7)(s),o=s},3099:(e,t,i)=>{i.r(t),i.d(t,{default:()=>h});var r=i(6540),n=i(8481),a=i(3962),d=i(8185),s=i(2874),c=i(4848);const l="ceejay.hilario@gmail.com";function h(){const[e,t]=(0,r.useState)(null),[i,h]=(0,r.useState)([]),[o,m]=(0,r.useState)(!0),[x,g]=(0,r.useState)(!1);(0,r.useEffect)(()=>{const e=(0,a.onAuthStateChanged)(s.auth,async e=>{t(e),e&&e.email===l?(g(!0),await p()):g(!1),m(!1)});return()=>e()},[]);const j=async()=>{const e=new a.GoogleAuthProvider;await(0,a.signInWithPopup)(s.auth,e)},p=async()=>{const e=(0,d.P)((0,d.collection)(s.db,"payments"),(0,d.My)("createdAt","desc")),t=(await(0,d.GG)(e)).docs.map(e=>({id:e.id,...e.data()}));h(t)};return o?(0,c.jsx)(n.A,{title:"Admin Dashboard",children:(0,c.jsx)("div",{style:{textAlign:"center",padding:"2rem"},children:"Loading..."})}):e?x?(0,c.jsx)(n.A,{title:"Admin Dashboard",children:(0,c.jsxs)("div",{style:{padding:"2rem"},children:[(0,c.jsx)("h1",{children:"\ud83d\udcca Payments Dashboard"}),(0,c.jsxs)("p",{children:["Logged in as: ",e.email]}),0===i.length?(0,c.jsx)("p",{children:"No payments found."}):(0,c.jsxs)("table",{border:"1",cellPadding:"10",style:{width:"100%",marginTop:"1rem"},children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:"Email"}),(0,c.jsx)("th",{children:"Tier"}),(0,c.jsx)("th",{children:"Receipt"}),(0,c.jsx)("th",{children:"Date"})]})}),(0,c.jsx)("tbody",{children:i.map(e=>(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:e.email}),(0,c.jsx)("td",{children:e.tier}),(0,c.jsx)("td",{children:(0,c.jsx)("a",{href:e.receiptUrl,target:"_blank",rel:"noopener noreferrer",children:"View Receipt"})}),(0,c.jsx)("td",{children:e.createdAt?.toDate().toLocaleString()||"Pending"})]},e.id))})]})]})}):(0,c.jsx)(n.A,{title:"Admin Dashboard",children:(0,c.jsxs)("div",{style:{textAlign:"center",padding:"2rem"},children:[(0,c.jsx)("h1",{children:"\ud83d\udeab Access Denied"}),(0,c.jsxs)("p",{children:["Sorry, ",e.email,", you do not have admin access."]})]})}):(0,c.jsx)(n.A,{title:"Admin Dashboard",children:(0,c.jsxs)("div",{style:{textAlign:"center",padding:"2rem"},children:[(0,c.jsx)("h1",{children:"\ud83d\udd12 Admin Dashboard"}),(0,c.jsx)("p",{children:"Please log in with Google to continue"}),(0,c.jsx)("button",{onClick:j,children:"Login with Google"})]})})}}}]);